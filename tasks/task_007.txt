# Task ID: 7
# Title: Implement Current Fees Card
# Status: in-progress
# Dependencies: 2
# Priority: medium
# Description: Create the Current Fees card with permission restrictions for Admin and Developer roles.
# Details:
1. Create a small card to display estimated annual fees (`clients.estAnnFees`)
2. Wrap the component in `<Authorized action={CLIENT_PERMISSIONS.FEES_VIEW}>` to restrict visibility
3. Add tooltip for 'Billing Commentary' that shows the commentary note
4. Style as a small, simple card with appropriate formatting for currency values
5. Handle loading and empty states

# Test Strategy:
Test permission gating to ensure only Admin and Developer roles can see the fees. Verify tooltip displays correctly with billing commentary.

# Subtasks:
## 1. Create base Current Fees Card component with loading states [done]
### Dependencies: None
### Description: Implement the foundational card component that displays the estimated annual fees with proper loading and empty states. This component will handle the core display logic without permissions yet.
### Details:
1. Create a new React component called `CurrentFeesCard` that accepts client data as props
2. Implement the card layout using your UI library (likely Material-UI based on research)
3. Display the estimated annual fees (`clients.estAnnFees`) with proper currency formatting
4. Add a skeleton loader for the loading state
5. Implement empty state handling with appropriate messaging
6. Set up basic styling for the card with responsive design considerations
7. Test the component with various data states (loading, empty, populated)
8. Ensure the component follows the application's design system for consistency

## 2. Add Billing Commentary tooltip and enhance styling [pending]
### Dependencies: 7.1
### Description: Enhance the Current Fees Card by adding the tooltip functionality for Billing Commentary and refining the card's visual presentation.
### Details:
1. Add a tooltip component that displays the billing commentary note
2. Position the tooltip trigger (icon or text) appropriately within the card layout
3. Implement hover/focus interactions for the tooltip
4. Ensure the tooltip is accessible (keyboard navigable and screen-reader friendly)
5. Refine the card styling to be compact yet informative
6. Format currency values using appropriate number formatting utilities
7. Add subtle visual indicators for fee amounts (e.g., color coding based on amount thresholds)
8. Test tooltip functionality across different browsers and devices
9. Ensure the component maintains responsive behavior on all screen sizes

## 3. Implement permission restrictions with Authorized wrapper [pending]
### Dependencies: 7.1, 7.2
### Description: Wrap the Current Fees Card component with permission restrictions to ensure only users with Admin and Developer roles can view the fee information.
### Details:
1. Import the `Authorized` component from your permissions system
2. Wrap the CurrentFeesCard component with `<Authorized action={CLIENT_PERMISSIONS.FEES_VIEW}>`
3. Ensure the component correctly handles unauthorized states (either hiding completely or showing an appropriate message)
4. Test the component with different user roles to verify permission restrictions work correctly
5. Implement any necessary fallback UI for users without proper permissions
6. Add unit tests to verify the permission logic works as expected
7. Document the permission requirements in component comments
8. Verify that the component integrates properly with the application's authentication context
9. Test edge cases such as role changes while the component is mounted

